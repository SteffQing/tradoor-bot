generator client {
    provider = "prisma-client-js"
    // output   = "../src/generated/prisma"
}

datasource db {
    provider = "sqlite"
    url      = "file:./tradoor.db"
}

model Config {
    key   String @id
    value String
}

model ExchangeAccount {
    id           String @id @default(uuid())
    userId       Int // Telegram user ID
    exchangeName String // e.g. 'binance', 'bybit', etc.

    apiKeyEncrypted    String
    apiSecretEncrypted String
    passwordEncrypted  String?

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    user User @relation(fields: [userId], references: [id], onDelete: Cascade)

    @@unique([userId, exchangeName])
}

model User {
    id        Int               @unique
    exchanges ExchangeAccount[]

    defaultLeverage Int      @default(1)
    defaultAmount   Float    @default(0.0)
    createdAt       DateTime @default(now())
    updatedAt       DateTime @updatedAt
}
